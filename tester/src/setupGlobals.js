const configData = {
    website: {
        pages: [
            {
                route: '/',
                title: 'Homepage',
                description: 'The homepage of the website',
                blocks: [
                    {
                        component: 'Header',
                        banner: {
                            caption: 'logo-dark',
                            url: 'https://assets.uniweb.app/opt/GvvwXNCVU2PPZ3bNozDiR4/lg.webp',
                        },
                        links: [],
                        lists: [
                            [
                                {
                                    imgs: [],
                                    videos: [],
                                    lists: [],
                                    links: [
                                        {
                                            href: 'topic:135',
                                            label: 'Templates',
                                        },
                                    ],
                                    headings: [],
                                    paragraphs: [],
                                    properties: [],
                                    propertyBlocks: [],
                                    icons: [],
                                    cards: [],
                                    buttons: [],
                                },
                                {
                                    imgs: [],
                                    videos: [],
                                    lists: [
                                        [
                                            {
                                                imgs: [],
                                                videos: [],
                                                lists: [],
                                                links: [
                                                    {
                                                        href: 'topic:2',
                                                        label: 'Create Dynamic Websites and Content-Driven Solutions',
                                                    },
                                                ],
                                                headings: [],
                                                paragraphs: [],
                                                properties: [],
                                                propertyBlocks: [],
                                                icons: [],
                                                cards: [],
                                                buttons: [],
                                            },
                                            {
                                                imgs: [],
                                                videos: [],
                                                lists: [],
                                                links: [
                                                    {
                                                        href: 'topic:11',
                                                        label: 'Intuitive for newcomers, powerful for pros: a CMS that adapts to you',
                                                    },
                                                ],
                                                headings: [],
                                                paragraphs: [],
                                                properties: [],
                                                propertyBlocks: [],
                                                icons: [],
                                                cards: [],
                                                buttons: [],
                                            },
                                            {
                                                imgs: [],
                                                videos: [],
                                                lists: [],
                                                links: [
                                                    {
                                                        href: 'topic:18',
                                                        label: 'The Easiest Way to Create Exceptional Documentation Websites',
                                                    },
                                                ],
                                                headings: [],
                                                paragraphs: [],
                                                properties: [],
                                                propertyBlocks: [],
                                                icons: [],
                                                cards: [],
                                                buttons: [],
                                            },
                                            {
                                                imgs: [],
                                                videos: [],
                                                lists: [],
                                                links: [
                                                    {
                                                        href: 'topic:63',
                                                        label: 'For Developers',
                                                    },
                                                ],
                                                headings: [],
                                                paragraphs: [],
                                                properties: [],
                                                propertyBlocks: [],
                                                icons: [],
                                                cards: [],
                                                buttons: [],
                                            },
                                        ],
                                    ],
                                    links: [],
                                    headings: [],
                                    paragraphs: ['Solutions'],
                                    properties: [],
                                    propertyBlocks: [],
                                    icons: [],
                                    cards: [],
                                    buttons: [],
                                },
                                {
                                    imgs: [],
                                    videos: [],
                                    lists: [
                                        [
                                            {
                                                imgs: [],
                                                videos: [],
                                                lists: [],
                                                links: [
                                                    {
                                                        href: 'topic:61',
                                                        label: 'Domain',
                                                    },
                                                ],
                                                headings: [],
                                                paragraphs: [],
                                                properties: [],
                                                propertyBlocks: [],
                                                icons: [],
                                                cards: [],
                                                buttons: [],
                                            },
                                        ],
                                    ],
                                    links: [
                                        {
                                            href: 'topic:58',
                                            label: 'Features',
                                        },
                                    ],
                                    headings: [],
                                    paragraphs: [],
                                    properties: [],
                                    propertyBlocks: [],
                                    icons: [],
                                    cards: [],
                                    buttons: [],
                                },
                                {
                                    imgs: [],
                                    videos: [],
                                    lists: [
                                        [
                                            {
                                                imgs: [],
                                                videos: [],
                                                lists: [],
                                                links: [
                                                    {
                                                        href: 'topic:106',
                                                        label: 'Submit A Library',
                                                    },
                                                ],
                                                headings: [],
                                                paragraphs: [],
                                                properties: [],
                                                propertyBlocks: [],
                                                icons: [],
                                                cards: [],
                                                buttons: [],
                                            },
                                            {
                                                imgs: [],
                                                videos: [],
                                                lists: [],
                                                links: [
                                                    {
                                                        href: 'topic:118',
                                                        label: 'Compare',
                                                    },
                                                ],
                                                headings: [],
                                                paragraphs: [],
                                                properties: [],
                                                propertyBlocks: [],
                                                icons: [],
                                                cards: [],
                                                buttons: [],
                                            },
                                            {
                                                imgs: [],
                                                videos: [],
                                                lists: [],
                                                links: [
                                                    {
                                                        href: 'topic:123',
                                                        label: 'Media Kit',
                                                    },
                                                ],
                                                headings: [],
                                                paragraphs: [],
                                                properties: [],
                                                propertyBlocks: [],
                                                icons: [],
                                                cards: [],
                                                buttons: [],
                                            },
                                        ],
                                    ],
                                    links: [],
                                    headings: [],
                                    paragraphs: ['Resources'],
                                    properties: [],
                                    propertyBlocks: [],
                                    icons: [],
                                    cards: [],
                                    buttons: [],
                                },
                                {
                                    imgs: [],
                                    videos: [],
                                    lists: [],
                                    links: [
                                        {
                                            href: 'topic:30',
                                            label: 'Blog',
                                        },
                                    ],
                                    headings: [],
                                    paragraphs: [],
                                    properties: [],
                                    propertyBlocks: [],
                                    icons: [],
                                    cards: [],
                                    buttons: [],
                                },
                                {
                                    imgs: [],
                                    videos: [],
                                    lists: [],
                                    links: [
                                        {
                                            href: 'topic:36',
                                            label: 'Videos',
                                        },
                                    ],
                                    headings: [],
                                    paragraphs: [],
                                    properties: [],
                                    propertyBlocks: [],
                                    icons: [],
                                    cards: [],
                                    buttons: [],
                                },
                                {
                                    imgs: [],
                                    videos: [],
                                    lists: [],
                                    links: [
                                        {
                                            href: 'topic:41',
                                            label: 'Pricing',
                                        },
                                    ],
                                    headings: [],
                                    paragraphs: [],
                                    properties: [],
                                    propertyBlocks: [],
                                    icons: [],
                                    cards: [],
                                    buttons: [],
                                },
                            ],
                        ],
                        properties: {
                            sticky: true,
                            alignment: 'left',
                            mode: 'manual',
                        },
                    },
                    {
                        component: 'Hero',
                        title: 'Create Beautiful Websites Instantly',
                        pretitle: '',
                        subtitle:
                            'Choose from our collection of professional templates and customize them to match your brand. Or build your own components for complete creative control.',
                        links: [
                            { href: 'topic:2', label: 'Explore Templates' },
                            { href: 'topic:2', label: 'Go DevMode' },
                        ],
                        banner: {
                            url: 'https://assets.uniweb.app/opt/8XMuZfYw4NmveeDZQHkTx2/lg.webp',
                        },
                        paragraphs: [],
                        images: [],
                        icons: [],
                        properties: { alignment: 'left' },
                        videos: [],
                        lists: [],
                        buttons: [],
                        childBlocks: [],
                        themeName: 'context__dark',
                        standardOptions: {
                            colors: {
                                elements: {
                                    dark: {
                                        'text-color': '#d1d5db',
                                        callout: 'rgba(255,255,255, 1)',
                                        muted: '#ffedd5',
                                        highlight: '#dbeafe',
                                    },
                                },
                                baseColorId: '',
                            },
                        },
                        childBlocks: [
                            {
                                component: 'ImageCarousel',
                                images: [
                                    {
                                        url: 'https://assets.uniweb.app/opt/LjFThjNVTA88xVysvFZKZN/lg.webp',
                                    },
                                    {
                                        url: 'https://assets.uniweb.app/opt/TpFTaToxXrwkHgnng3AEA8/lg.webp',
                                    },
                                    {
                                        url: 'https://assets.uniweb.app/opt/6sXJkBtPAAnPxBEwsCWqUC/lg.webp',
                                    },
                                ],
                                themeName: 'context__light',
                            },
                        ],
                    },
                    {
                        component: 'Feature',
                        title: 'Create a Dynamic Web Presence',
                        subtitle: 'Save time and resources while keeping your website current',
                        properties: { appearance: 'standard', sub_content_layout: 'grid_md' },
                        themeName: 'context__light',
                        childBlocks: [
                            {
                                component: 'FeatureItem',
                                title: 'Start with Professional Templates',
                                paragraphs: [
                                    "Choose from a variety of templates. Preview and customize instantly, with flexible plans available when you're ready to publish.",
                                ],
                                icons: [
                                    '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-palette w-6 h-6 text-blue-500"><circle cx="13.5" cy="6.5" r=".5" fill="currentColor"></circle><circle cx="17.5" cy="10.5" r=".5" fill="currentColor"></circle><circle cx="8.5" cy="7.5" r=".5" fill="currentColor"></circle><circle cx="6.5" cy="12.5" r=".5" fill="currentColor"></circle><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"></path></svg>',
                                    '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg>',
                                ],
                                links: [{ href: '', label: 'Browse templates' }],
                                properties: { mode: 'catching_card' },
                                themeName: 'context__light',
                                standardOptions: {
                                    colors: {
                                        elements: {
                                            light: {
                                                'icon-color': 'rgba(59,130,246,1)',
                                                'link-color': 'rgba(59,130,246,1)',
                                                'link-hover-color': 'rgba(37,99,235,1)',
                                                'text-color': 'rgba(75,85,99,1)',
                                                'bg-color': 'rgba(255,255,255, 1)',
                                                'heading-color': 'rgba(0,0,0, 1)',
                                            },
                                        },
                                        baseColorId: '',
                                    },
                                },
                            },
                            {
                                component: 'FeatureItem',
                                title: 'Focus on Your Content',
                                paragraphs: [
                                    'Write and update naturally while purpose-built design systems handle the presentation. No technical expertise needed.',
                                ],
                                icons: [
                                    '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pen-tool w-6 h-6 text-orange-500"><path d="M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z"></path><path d="m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18"></path><path d="m2.3 2.3 7.286 7.286"></path><circle cx="11" cy="11" r="2"></circle></svg>',
                                    '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-play w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"><circle cx="12" cy="12" r="10"></circle><polygon points="10 8 16 12 10 16 10 8"></polygon></svg>',
                                ],
                                links: [{ href: '', label: 'Watch 2-min demo' }],
                                properties: { mode: 'catching_card' },
                                themeName: 'context__light',
                                standardOptions: {
                                    colors: {
                                        elements: {
                                            light: {
                                                'icon-color': 'rgba(249,115,22,1)',
                                                'link-color': 'rgba(249,115,22,1)',
                                                'link-hover-color': 'rgba(234,88,12,1)',
                                                'text-color': 'rgba(75,85,99,1)',
                                                'bg-color': 'rgba(255,255,255, 1)',
                                                'heading-color': 'rgba(0,0,0, 1)',
                                            },
                                        },
                                        baseColorId: '',
                                    },
                                },
                            },
                            {
                                component: 'FeatureItem',
                                title: 'Access Premium Features',
                                paragraphs: [
                                    'Get premium features out of the box: multilingual sites, dynamic content, and collaborative workflows.',
                                ],
                                icons: [
                                    '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sparkles w-6 h-6 text-green-500"><path d="M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z"></path><path d="M20 3v4"></path><path d="M22 5h-4"></path><path d="M4 17v2"></path><path d="M5 18H3"></path></svg>',
                                    '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg>',
                                ],
                                links: [{ href: '', label: 'Explore features' }],
                                properties: { mode: 'catching_card' },
                                themeName: 'context__light',
                                standardOptions: {
                                    colors: {
                                        elements: {
                                            light: {
                                                'icon-color': 'rgba(34,197,94,1)',
                                                'link-color': 'rgba(34,197,94,1)',
                                                'link-hover-color': 'rgba(22,163,74,1)',
                                                'text-color': 'rgba(75,85,99,1)',
                                                'bg-color': 'rgba(255,255,255, 1)',
                                                'heading-color': 'rgba(0,0,0, 1)',
                                            },
                                        },
                                        baseColorId: '',
                                    },
                                },
                            },
                        ],
                    },
                ],
            },
        ],
        themeData: {
            colors: {
                light: {
                    primary: '#f97316',
                    secondary: '#3b82f6',
                    accent: '',
                    neutral: '',
                },
                medium: {
                    primary: '#f78c06',
                    secondary: '#41a5ee',
                    accent: '#655de8',
                    neutral: '#000000',
                },
                dark: {
                    primary: '#f78c06',
                    secondary: '#41a5ee',
                    accent: '#655de8',
                    neutral: '#000000',
                },
            },
            elements: {
                light: {
                    'text-color': 'rgba(0,0,0, 1)',
                    'bg-color': 'rgba(255,255,255, 1)',
                    'heading-color': 'rgba(0,0,0, 1)',
                    'link-color': 'rgba(var(--neutral-950) / 1.00)',
                    'link-hover-color': 'rgba(var(--neutral-950) / 1.00)',
                    'icon-color': '',
                    'btn-color': 'rgba(24,59,221,1)',
                    'btn-text-color': 'rgba(255,255,255, 1)',
                    'btn-alt-text-color': 'rgba(24,59,221,1)',
                    'btn-hover-text-color': 'rgba(255,255,255, 1)',
                    'btn-hover-color': 'rgba(56,83,216,1)',
                },
                medium: {
                    'text-color': 'rgba(0,0,0, 1)',
                    'bg-color': 'rgba(255,243,226,1)',
                    'heading-color': 'rgba(0,0,0, 1)',
                    'link-color': '#172554',
                    'icon-color': '',
                    'link-hover-color': '#1e3a8a',
                    'btn-color': 'rgba(32,86,240,1.00)',
                    'btn-hover-text-color': 'rgba(var(--neutral-500) / 1.00)',
                    'btn-hover-color': 'rgba(65,105,225,1.00)',
                },
                dark: {
                    'text-color': 'rgba(255,255,255,1.00)',
                    'bg-color': 'rgba(var(--neutral-950) / 1.00)',
                    'heading-color': 'rgba(255,255,255,1.00)',
                    'link-color': 'rgba(var(--neutral-50) / 1.00)',
                    'icon-color': '',
                    'link-hover-color': 'rgba(var(--neutral-50) / 1.00)',
                    'btn-color': 'rgba(190,216,255,1.00)',
                    'btn-hover-text-color': 'rgba(var(--neutral-900) / 1.00)',
                    'btn-hover-color': 'rgba(65,105,225,1.00)',
                },
                _config: {
                    dark: {
                        'text-color': '',
                        'bg-color': 'manual',
                    },
                    medium: {
                        'text-color': 'manual',
                        'heading-color': 'manual',
                        'link-color': 'manual',
                        'bg-color': 'manual',
                        'link-hover-color': 'manual',
                    },
                },
            },
            name: 'Uniweb',
            fonts: {
                heading: '',
                body: '',
            },
            importedFonts: 'undefined',
            baseColorId: 'basecolors-1733424692246-acpvxkyel',
            src: '30',
            vars: {
                light: {
                    '--primary-50': '255 247 237',
                    '--primary-100': '255 237 213',
                    '--primary-200': '254 215 170',
                    '--primary-300': '253 186 116',
                    '--primary-400': '251 146 60',
                    '--primary-500': '249 115 22',
                    '--primary-600': '234 88 12',
                    '--primary-700': '194 65 12',
                    '--primary-800': '154 52 18',
                    '--primary-900': '124 45 18',
                    '--primary-950': '67 20 7',
                    '--secondary-50': '239 246 255',
                    '--secondary-100': '219 234 254',
                    '--secondary-200': '191 219 254',
                    '--secondary-300': '147 197 253',
                    '--secondary-400': '96 165 250',
                    '--secondary-500': '59 130 246',
                    '--secondary-600': '37 99 235',
                    '--secondary-700': '29 78 216',
                    '--secondary-800': '30 64 175',
                    '--secondary-900': '30 58 138',
                    '--secondary-950': '23 37 84',
                    '--accent-50': '',
                    '--accent-100': '',
                    '--accent-200': '',
                    '--accent-300': '',
                    '--accent-400': '',
                    '--accent-500': '',
                    '--accent-600': '',
                    '--accent-700': '',
                    '--accent-800': '',
                    '--accent-900': '',
                    '--accent-950': '',
                    '--neutral-50': '',
                    '--neutral-100': '',
                    '--neutral-200': '',
                    '--neutral-300': '',
                    '--neutral-400': '',
                    '--neutral-500': '',
                    '--neutral-600': '',
                    '--neutral-700': '',
                    '--neutral-800': '',
                    '--neutral-900': '',
                    '--neutral-950': '',
                },
                medium: {
                    '--primary-50': '255 251 236',
                    '--primary-100': '255 247 211',
                    '--primary-200': '255 235 165',
                    '--primary-300': '255 218 109',
                    '--primary-400': '255 191 50',
                    '--primary-500': '255 167 10',
                    '--primary-600': '255 144 0',
                    '--primary-700': '204 106 2',
                    '--primary-800': '161 81 11',
                    '--primary-900': '130 68 12',
                    '--primary-950': '70 33 4',
                    '--secondary-50': '241 249 254',
                    '--secondary-100': '226 241 252',
                    '--secondary-200': '191 226 248',
                    '--secondary-300': '135 204 242',
                    '--secondary-400': '69 177 232',
                    '--secondary-500': '32 152 215',
                    '--secondary-600': '18 122 183',
                    '--secondary-700': '16 97 148',
                    '--secondary-800': '17 83 123',
                    '--secondary-900': '20 70 102',
                    '--secondary-950': '13 44 68',
                    '--accent-50': '241 244 253',
                    '--accent-100': '223 231 250',
                    '--accent-200': '197 213 248',
                    '--accent-300': '158 187 242',
                    '--accent-400': '112 151 234',
                    '--accent-500': '65 105 225',
                    '--accent-600': '57 87 215',
                    '--accent-700': '48 68 197',
                    '--accent-800': '45 57 160',
                    '--accent-900': '41 52 127',
                    '--accent-950': '29 34 78',
                    '--neutral-50': '246 246 246',
                    '--neutral-100': '231 231 231',
                    '--neutral-200': '209 209 209',
                    '--neutral-300': '176 176 176',
                    '--neutral-400': '136 136 136',
                    '--neutral-500': '109 109 109',
                    '--neutral-600': '93 93 93',
                    '--neutral-700': '79 79 79',
                    '--neutral-800': '69 69 69',
                    '--neutral-900': '61 61 61',
                    '--neutral-950': '0 0 0',
                },
                dark: {
                    '--primary-50': '255 251 236',
                    '--primary-100': '255 247 211',
                    '--primary-200': '255 235 165',
                    '--primary-300': '255 218 109',
                    '--primary-400': '255 191 50',
                    '--primary-500': '255 167 10',
                    '--primary-600': '255 144 0',
                    '--primary-700': '204 106 2',
                    '--primary-800': '161 81 11',
                    '--primary-900': '130 68 12',
                    '--primary-950': '70 33 4',
                    '--secondary-50': '241 249 254',
                    '--secondary-100': '226 241 252',
                    '--secondary-200': '191 226 248',
                    '--secondary-300': '135 204 242',
                    '--secondary-400': '69 177 232',
                    '--secondary-500': '32 152 215',
                    '--secondary-600': '18 122 183',
                    '--secondary-700': '16 97 148',
                    '--secondary-800': '17 83 123',
                    '--secondary-900': '20 70 102',
                    '--secondary-950': '13 44 68',
                    '--accent-50': '241 244 253',
                    '--accent-100': '223 231 250',
                    '--accent-200': '197 213 248',
                    '--accent-300': '158 187 242',
                    '--accent-400': '112 151 234',
                    '--accent-500': '65 105 225',
                    '--accent-600': '57 87 215',
                    '--accent-700': '48 68 197',
                    '--accent-800': '45 57 160',
                    '--accent-900': '41 52 127',
                    '--accent-950': '29 34 78',
                    '--neutral-50': '246 246 246',
                    '--neutral-100': '231 231 231',
                    '--neutral-200': '209 209 209',
                    '--neutral-300': '176 176 176',
                    '--neutral-400': '136 136 136',
                    '--neutral-500': '109 109 109',
                    '--neutral-600': '93 93 93',
                    '--neutral-700': '79 79 79',
                    '--neutral-800': '69 69 69',
                    '--neutral-900': '61 61 61',
                    '--neutral-950': '0 0 0',
                },
            },
            id: 'custom',
        },
    },
};

class Block {
    constructor(blockData, id) {
        this.id = id;
        this.component = blockData.component;
        this.Component = null;

        // this.title = blockData.title || '';
        // this.pretitle = blockData.pretitle || '';
        // this.subtitle = blockData.subtitle || '';
        // this.properties = blockData.properties || {};

        // this.links = blockData.links || []; //
        // this.banner = blockData.banner || null; //
        // this.paragraphs = blockData.paragraphs || []; //
        // this.images = blockData.images || []; //
        // this.icons = blockData.icons || []; //
        // this.videos = blockData.videos || []; //
        // this.lists = blockData.lists || []; //
        // this.buttons = blockData.buttons || []; //

        this.main = {
            header: {
                title: blockData.title || '',
                pretitle: blockData.pretitle || '',
                subtitle: blockData.subtitle || '',
            },
            banner: blockData.banner || null,
            body: {
                links: blockData.links || [],
                paragraphs: blockData.paragraphs || [],
                imgs: blockData.images || [],
                icons: blockData.icons || [],
                videos: blockData.videos || [],
                lists: blockData.lists || [],
                buttons: blockData.buttons || [],
                properties: blockData.properties || {},
            },
        };

        this.themeName = blockData.themeName || 'light';
        this.standardOptions = blockData.standardOptions || {};

        this.childBlocks = blockData.childBlocks
            ? blockData.childBlocks.map((block, i) => new Block(block, `${id}_${i}`))
            : [];
    }

    getComponent() {
        return uniweb.getRemoteComponent(this.component);
    }

    getBlockContent() {
        return {
            ...this.main.header,
            ...this.main.body,
            images: this.main.body.imgs,
            banner: this.main.banner,
        };
    }

    getBlockProperties() {
        return this.main.body.properties;
    }

    getChildBlockRenderer() {
        return uniweb.childBlockRenderer;
    }

    getNextBlockInfo() {
        const website = uniweb.activeWebsite;
        const page = website.activePage;

        const currIndex = page.blocks.findIndex((b) => b.id === this.id);
        const nextIndex = currIndex + 1;

        return {
            theme: page.blocks[nextIndex].themeName,
            category: page.blocks[nextIndex].component,
            state: {},
        };
    }

    getBlockLinks() {
        return this.links;
    }

    getBlockLinks(options = {}) {
        const website = uniweb.activeWebsite;

        if (options.nested) {
            const lists = this.main.body?.lists || [];
            const links = lists[0];

            return Block.parseNestedLinks(links, website);
        } else {
            let links = this.main.body?.links || [];

            links = links.map((link) => {
                return { route: website.makeHref(link.href), label: link.label };
            });

            return links;
        }
    }

    static parseNestedLinks = (list, website) => {
        const parsed = [];

        if (list?.length) {
            list.forEach((listItem) => {
                const { links, lists, paragraphs } = listItem;

                const link = links[0];
                const nestedList = lists[0];
                const text = paragraphs[0];

                let label = '',
                    href = '',
                    subLinks = [],
                    hasData = true;

                // if itself is a link
                if (link) {
                    label = link.label;
                    href = link.href;

                    // if has child links
                    if (nestedList) {
                        subLinks = Block.parseNestedLinks(nestedList, website);
                    }
                } else {
                    label = text;
                    hasData = false;

                    // if has child links
                    if (nestedList) {
                        subLinks = Block.parseNestedLinks(nestedList, website);
                    }
                }

                parsed.push({
                    label,
                    route: website.makeHref(href),
                    child_items: subLinks,
                    hasData,
                });
            });
        }
        return parsed;
    };
}

class Page {
    constructor(pageData, id) {
        this.id = id;
        this.route = pageData.route;
        this.title = pageData.title;
        this.description = pageData.description;
        this.blocks = pageData.blocks.map((block, index) => new Block(block, index));
    }

    getPageProfile() {}
}

class Website {
    constructor(websiteData) {
        this.pages = websiteData.pages.map((page, index) => new Page(page, index));
        this.activePage = this.pages[0];
        this.pageRoutes = this.pages.map((page) => page.route);
        this.themeData = websiteData.themeData;
        this.routingComponents = {};
        this.activeLang = 'en';
        this.langs = [
            {
                label: 'English',
                value: 'en',
            },
            {
                label: 'franÃ§ais',
                value: 'fr',
            },
        ];
    }

    getRoutingComponents() {
        return uniweb.routingComponents;
    }

    makeHref(href) {
        return href;
    }

    getLanguages() {
        return this.langs;
    }

    getLanguage() {
        return this.activeLang;
    }

    localize(val, defaultVal = '', givenLang = '', fallbackDefaultLangVal = false) {
        const lang = givenLang || this.activeLang;

        const defaultLang = this.langs[0].value || 'en';

        if (typeof val === 'object' && !Array.isArray(val)) {
            return fallbackDefaultLangVal
                ? val?.[lang] || val?.[defaultLang] || defaultVal
                : val?.[lang] || defaultVal;
        }

        if (typeof val === 'string') {
            if (!val.startsWith('{') && !val.startsWith('"')) return val;

            try {
                let obj = JSON.parse(val);

                if (typeof obj === 'object') {
                    return fallbackDefaultLangVal
                        ? obj?.[lang] || obj?.[defaultLang] || defaultVal
                        : obj?.[lang] || defaultVal;
                } else return obj;
            } catch (e) {
                return val;
            }
        }

        return defaultVal;
    }

    getSearchData() {
        return this.pages.map((page) => {
            return {
                id: page.id,
                title: page.title,
                href: page.route,
                route: page.route,
                description: page.description,
                content: page.blocks
                    .map((b) => b.title)
                    .filter(Boolean)
                    .join('\n'),
            };
        });
    }
}

class Uniweb {
    constructor(configData) {
        this.activeWebsite = new Website(configData.website);
        this.childBlockRenderer = null;
        this.routingComponents = {};
        this.remoteComponents = null;
        this.language = 'en';
    }

    setRemoteComponents(module) {
        this.remoteComponents = module.default;
    }

    getRemoteComponent(name) {
        return this.remoteComponents[name];
    }
}

(function () {
    window.uniweb = new Uniweb(configData);

    import('./bootstrap.js').then((module) => {
        module.default();
    });
})();

//////////////////////////////////config data//////////////////////////////////
